{% extends 'base.html' %}

{% block title %}
  {% if data.tournament.id %}Edit Tournament{% else %}New Tournament{% endif %}
  - {{ g.group.name }}
{% endblock %}

{% block header %}
  {{
    render_header([
      ("Groups", url_for("groups.show_user_groups")),
      (g.group.name, url_for("groups.show_group_page")),
      ("Tournaments", url_for("tournaments.index")),
      ((tournament and "Edit Tournament") or "New Tournament", "")
    ])
  }}
{% endblock %}

{% block content %}
  <div class="form">

    <div class="form__header">
      {{ (tournament and "Edit Tournament") or "New Tournament" }}
    </div>

    <div class="form__item">
      <div class="form__help">
        Please fill in the form below and hit 'save'.<br/>
      </div>
    </div>

    <form action="" method="post">

      <div class="form__item">
        <div class="form__label">
          <label for="tournament_name">Tournament Name</label>
        </div>
        <input class="form__input"
          name="tournament_name"
          id="tournament_name"
          type="text"
          value="{{ data.tournament.name or '' }}"
          maxlength="100"
          required
        />
      </div>

      <div class='form__item'>
        <label for='has_started'>
          <input id='has_started'
                 name='has_started'
                 type='checkbox'
                 value='1'
                 {{ (data.tournament.has_started and "checked") or '' }}
          />
          <span>Launch tournament?</span>
        </label>
      </div>

      <div class='form__item'>
        <label for='has_finished'>
          <input id='has_finished'
                 name='has_finished'
                 type='checkbox'
                 value='1'
                 {{ (data.tournament.has_finished and "checked") or '' }}
          />
          <span>Finish tournament?</span>
        </label>
      </div>

      <div class='form__item'>
        <button class="button button_action">Save</button>
      </div>

    </form>

    {% if data.tournament.id %}
      <form action="{{ url_for('tournaments.delete_tournament', tournament_id=data.tournament.id) }}"
            method="post">
        <div class='form__item'>
          <button class="button button_danger"
                  onclick="return confirm('Are you sure?');">
            Delete
          </button>
        </div>
      </form>
    {% endif %}

  </div>
{% endblock %}
