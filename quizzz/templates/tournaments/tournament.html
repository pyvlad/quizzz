{% extends 'base.html' %}

{% block title %}{{ data.tournament.name }} Tournament - {{g.group.name}}{% endblock %}

{% block header %}
  {{
    render_header([
      ("Groups", url_for("groups.show_user_groups")),
      (g.group.name, url_for("groups.show_group_page")),
      ("Tournaments", url_for("tournaments.index")),
      (data.tournament.name, "")
    ])
  }}
{% endblock %}

{% block content %}
  {% if data.has_edit_permissions %}
    <div class="actions">
      <a class="actions__item"
         href="{{ url_for('tournaments.edit_round', tournament_id=data.tournament.id, round_id=0) }}">
        <button class="button button_action my_md">Add Round</button>
      </a>
      <a class="actions__item actions__item_last"
         href="{{ url_for('tournaments.edit_tournament', tournament_id=data.tournament.id) }}">
        <button class="button button_action my_md">Edit Tournament</button>
      </a>
    </div>
  {% endif %}
  <ul class="list">
    {% for round in data.tournament.rounds %}
      <a class="list__item-link"
         href="{{ url_for('tournaments.show_round', round_id=round.id) }}">
        <li class="list__item {% if not round.is_taken %}list__item_active{% endif %}">
          <div class="list__text-primary">{{ round.quiz.topic }}</div>
          <div class="list__text-secondary">by {{ round.quiz.author }}</div>
          <div class="list__text-secondary">{{ round.start_time }} - {{ round.finish_time }}</div>
          {% if data.has_edit_permissions %}
            <a href="{{ url_for('tournaments.edit_round', tournament_id=data.tournament.id, round_id=round.id) }}">
              Edit Round
            </a>
          {% endif %}
        </li>
      </a>
    {% endfor %}
  </ul>
{% endblock %}
