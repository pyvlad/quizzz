{% extends 'base.html' %}

{% block title %}
  {% if data.round.id %}Edit Round{% else %}New Round{% endif %}
  - {{ g.group.name }}
{% endblock %}

{% block content %}
  <div class="container">
    <div class="row">
      <div class="col-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 paper-sm bg-grey p-2 p-md-4 my-2">
        <div class="form">

          <div class="form__header">
            {{ (data.round.id and "Edit Round") or "New Round" }}
          </div>

          <div class="form__item">
            <div class="form__help">
              Please fill in the form below and hit 'save'.<br/>
            </div>
          </div>

          <div class="form__item">
            <div class="form__label">
              <label for="tournament_name">Tournament Name</label>
            </div>
            <input class="form__input"
              name="tournament_name"
              id="tournament_name"
              type="text"
              value="{{ data.tournament.name }}"
              disabled
            />
          </div>

          <form action="" method="post">

            {{ form.hidden_tag() }}

            <div class='form__item'>
              {{ form.quiz_id.label(class="form__label") }}
              {{ form.quiz_id() }}
            </div>

            <div class="form__item">
              <div class="form__label">
                Start Time
              </div>
              <div class="container">
                <div class="row">
                  <div class="col-6">
                    <div class="form__input-help">date</div>
                    {{ form.start_date(class="form__input") }}
                  </div>
                  <div class="col-offset-1 col-2">
                    <div class="form__input-help">hours</div>
                    {{ form.start_time_hours(class="form__input") }}
                  </div>
                  <div class="col-offset-1 col-2">
                    <div class="form__input-help">minutes</div>
                    {{ form.start_time_minutes(class="form__input") }}
                  </div>
                </div>
              </div>
            </div>

            <div class="form__item">
              <div class="form__label">
                Finish Time
              </div>
              <div class="container">
                <div class="row">
                  <div class="col-6">
                    <div class="form__input-help">date</div>
                    {{ form.finish_date(class="form__input") }}
                  </div>
                  <div class="col-offset-1 col-2">
                    <div class="form__input-help">hours</div>
                    {{ form.finish_time_hours(class="form__input") }}
                  </div>
                  <div class="col-offset-1 col-2">
                    <div class="form__input-help">minutes</div>
                    {{ form.finish_time_minutes(class="form__input") }}
                  </div>
                </div>
              </div>
            </div>

            <div class='form__item text-centered'>
              <button class="btn btn--secondary btn--mw200">Save</button>
            </div>

          </form>

          {% if data.round.id %}
            <form action="{{ url_for('tournaments.delete_round', round_id=data.round.id) }}"
                  method="post">

              {{ delete_form.hidden_tag() }}

              <div class='form__item text-centered'>
                <button class="btn btn--red btn--mw200"
                        onclick="return confirm('Are you sure?');">
                  Delete
                </button>
              </div>
            </form>
          {% endif %}

        </div>
      </div>
    </div>
  </div>
{% endblock %}
