{% extends 'base.html' %}

{% block title %}My Quizzes - {{g.group.name}}{% endblock %}

{% block header %}
  {{
    render_header([
      ("Groups", url_for("groups.show_user_groups")),
      (g.group.name, url_for("groups.show_group_page")),
      ("My Quizzes", url_for("quizzes.index"))
    ])
  }}
{% endblock %}

{% block content %}
  {% if g.user %}
    <section class="actions">
      <a class="button button_action my_md" href="{{ url_for('quizzes.edit', quiz_id=0) }}">
        New Quiz
      </a>
    </section>
  {% endif %}
  
  <h3>To Be Finished</h3>
  <ul class="list my_md">
    {% for quiz in data.user_quizzes_in_progress %}
      <li class="list__item list__item_active">
        <a class="list__linked-content" href="{{ url_for('quizzes.edit', quiz_id=quiz.id) }}">
          <div class="list__text-primary">
            {{ quiz.topic }}
          </div>
          {% if quiz.time_updated %}
            <div class="list__text-secondary">
              last updated at {{ quiz.time_updated.strftime('%Y-%m-%d') }}
            </div>
          {% endif %}
        </a>
      </li>
    {% else %}
      <li>
        You don't have any unfinished quizzes.
      </li>
    {% endfor %}
  </ul>

  <h3>Submitted Quizzes</h3>
  <ul class="list my_md">
    {% for quiz in data.user_quizzes_finalized %}
      <li class="list__item">
        <a class="list__linked-content" href="{{ url_for('quizzes.edit', quiz_id=quiz.id) }}">
          <div class="list__text-primary">
            {{ quiz.topic }}
          </div>
          <div class="list__text-secondary">
            {% if quiz.time_updated %}
              {{ quiz.time_updated.strftime('%Y-%m-%d') }}
            {% else %}
              {{ quiz.time_created.strftime('%Y-%m-%d') }}
            {% endif %}
          </div>
        </a>
      </li>
    {% else %}
      <li>
        You don't have any submitted quizzes.
      </li>
    {% endfor %}
  </ul>
{% endblock %}
