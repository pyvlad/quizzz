{% extends 'base.html' %}
{% from 'macros.html' import render_chat_message %}

{% block title %}{{ data.group.name }}{% endblock %}

{% block header %}
  {{
    render_header([
      ("Groups", url_for("groups.show_user_groups")),
      (data.group.name, ""),
    ])
  }}
{% endblock %}

{% block content %}
  <h2 class="heading heading_primary">Group: {{ data.group.name }}</h2>

  <div class="container">
    <div class="row">
      <div class="col-12 col-sm-6">
        <div class="container">
          <div class="row">
            <div class="col-12 col-sm-11">
              <h3 class="heading heading_secondary">
                <a href="{{ url_for('tournaments.index') }}">Tournaments</a>
              </h3>
              <ul class="list">
                {% for tournament in data.current_tournaments %}
                  <li class="list__item">
                    <a class="list__linked-content"
                       href="{{ url_for('tournaments.show_tournament', tournament_id=tournament.id) }}">
                      <div class="list__text-primary">
                        {{ tournament.name }}
                      </div>
                    </a>
                  </li>
                {% else %}
                  <p>No tournaments are currently available.</p>
                {% endfor %}
              </ul>
              <h3 class="heading heading_secondary">
                <a href="{{ url_for('quizzes.index') }}">Your Quizzes</a>
              </h3>
              <p>You have <strong>{{ data.num_user_quizzes_in_progress }}</strong> unfinished
                 and <strong>{{ data.num_user_quizzes_finalized }}</strong> submitted quizzes
                 for this group.</p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-6">
        <div class="container">
          <div class="row">
            <div class="col-12 col-sm-offset-1 col-sm-11">
              <h3 class="heading heading_secondary">
                <a href="{{ url_for('chat.index') }}">Chat</a>
              </h3>

              {% for msg in data.chat_messages %}
                {{ render_chat_message(msg) }}
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
